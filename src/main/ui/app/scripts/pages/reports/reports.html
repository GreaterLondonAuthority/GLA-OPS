<div class="reports">
  <page-header class="no-padding mbottom10">Reports</page-header>

  <well>
    <section-header>ReportServer</section-header>
    <div>Access to <a ng-href="{{envVars['reportServer-url']}}" target="_blank">report server</a> is restricted. If you
      need access contact your manager.
    </div>
  </well>


  <well class="mtop30">
    <section-header>Export reports</section-header>
    <div class="row form">
      <div class="col-md-2 form-group">
        <label for="reportOption">Report Type</label><br/>
        <ui-select id="reportOption"
                   name="reportOption"
                   class="search-dropdown"
                   ng-model="$ctrl.selectedReportType"
                   search-enabled="false"
                   on-select="$ctrl.selectReportType($select.selected)"
                   required>
          <ui-select-match>{{$ctrl.selectedReportType.description}}</ui-select-match>
          <ui-select-choices repeat="reportType in $ctrl.reportTypes">
            <span>{{reportType.description}}</span>
          </ui-select-choices>
        </ui-select>
      </div>

      <div class="col-md-2 form-group" ng-if="$ctrl.selectedReportType.showMilestonesDropdown">
        <label for="milestoneOption">Milestone</label><br/>
        <ui-select id="milestoneOption"
                   name="milestone-option-name"
                   class="search-dropdown"
                   ng-model="$ctrl.selectedMilestone"
                   on-select="$ctrl.onFormChange()"
                   search-enabled="false">
          required>
          <ui-select-match>{{$ctrl.selectedMilestone.description}}</ui-select-match>
          <ui-select-choices repeat="milestone in $ctrl.milestones">
            <span>{{milestone.description}}</span>
          </ui-select-choices>
        </ui-select>
      </div>

      <div class="col-md-2 form-group">
        <label for="programmeOption">Programme</label><br/>
        <ui-select id="programmeOption"
                   name="programme-option-name"
                   class="search-dropdown"
                   ng-model="$ctrl.selectedProgramme"
                   search-enabled="false"
                   on-select="$ctrl.selectProgramme($select.selected)"
                   ng-disabled="!$ctrl.enabled.programmeSelector">
          required>
          <ui-select-match>{{$ctrl.selectedProgramme.description}}</ui-select-match>
          <ui-select-choices repeat="programme in $ctrl.filteredProgrammes">
            <span>{{programme.description}}</span>
          </ui-select-choices>
        </ui-select>
      </div>

      <div class="col-md-2 form-group">
        <label for="projectTypeOption">Project Type</label><br/>
        <ui-select id="projectTypeOption"
                   name="project-type-option"
                   class="search-dropdown"
                   ng-model="$ctrl.selectedProjectType"
                   search-enabled="false"
                   on-select="$ctrl.selectProjectType($select.selected)"
                   ng-disabled="!$ctrl.enabled.projectType">
          <ui-select-match>{{$ctrl.selectedProjectType.description}}</ui-select-match>
          <ui-select-choices repeat="projectType in $ctrl.projectTypes">
            <span>{{projectType.description}}</span>
          </ui-select-choices>
        </ui-select>
      </div>


      <div class="col-md-2 form-group">
        <label for="projectStatus">Project Status</label><br/>
        <ui-select id="projectStatus"
                   name="project-status"
                   class="search-dropdown"
                   ng-model="$ctrl.selectedProjectStatus"
                   search-enabled="false"
                   on-select="$ctrl.selectProjectStatus($select.selected)"
                   ng-disabled="!$ctrl.enabled.projectStatus">
          <ui-select-match>{{$select.selected.description}}</ui-select-match>
          <ui-select-choices repeat="status in $ctrl.projectStatus">
            <span>{{status.description}}</span>
          </ui-select-choices>
        </ui-select>
      </div>

      <div class="col-md-2 form-group">
        <label for="borough">Borough</label><br/>
        <ui-select id="borough"
                   name="borough-name"
                   class="search-dropdown"
                   ng-model="$ctrl.selectedBorough"
                   search-enabled="false"
                   on-select="$ctrl.selectBorough($select.selected)"
                   ng-disabled="!$ctrl.enabled.borough">
          <ui-select-match>{{$select.selected.description}}</ui-select-match>
          <ui-select-choices repeat="borough in $ctrl.boroughs">
            <span>{{borough.description}}</span>
          </ui-select-choices>
        </ui-select>
      </div>


      <div class="col-md-2 form-group" ng-class="{'col-md-offset-10': $ctrl.selectedReportType.showMilestonesDropdown}">
        <a class="link downloadButton btn btn-primary btn-md form-control"
           ng-disabled="!$ctrl.enabled.boroughReportLink"
           ng-href="{{$ctrl.reportUrl}}"
           ng-click="$ctrl.generatingLink()">
          {{$ctrl.linkLabel}}<span class="glyphicon glyphicon-download-alt"/>
        </a>
      </div>
    </div>
  </well>
</div>
